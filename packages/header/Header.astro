---
import MantineHeader from "@/packages/header/MantineHeader";
import Search from "@/packages/search/Search";
import HeaderNanoStore from "./store/HeaderNanoStore";
import { $pathname } from "./store/pathname";

const pathName = normalizePath(Astro.url.pathname);
$pathname.set(pathName);

function normalizePath(path: string) {
  return path.endsWith("/") && path !== "/" ? path.slice(0, -1) : path;
}
---

<header transition:persist>
  <HeaderNanoStore pathname={pathName} client:load />
  <MantineHeader client:load>
    <Search slot={"searchNode"} client:idle />
  </MantineHeader>
</header>
