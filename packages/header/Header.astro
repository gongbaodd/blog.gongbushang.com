---
import MantineHeader from "@/packages/header/MantineHeader";
import Search from "@/packages/search/Search";
import HeaderNanoStore from "./store/HeaderNanoStore";
import { $pathname } from "./store/pathname";
import { ROUTE_LABEL } from "../consts";
import HomeSkeleton from "@/src/skeletons/home";
import BlogSkeleton from "@/src/skeletons/blog";
import WorldSkeleton from "@/src/skeletons/world";
import ArchiveSkeleton from "@/src/skeletons/archive";
import TransitionFrom from "@/src/components/TransitionFrom.astro";

const pathName = Astro.url.pathname;
$pathname.set(pathName);
---

<HeaderNanoStore pathname={pathName} client:load />
<MantineHeader client:load>
  <Search slot={"searchNode"} client:idle />
  <section transition:name={ROUTE_LABEL.Home} slot={"loaderHome"}>
    <HomeSkeleton />
  </section>
  <section transition:name={ROUTE_LABEL.Blog} slot={"loaderBlog"}>
    <BlogSkeleton />
  </section>
  <section transition:name={ROUTE_LABEL.World} slot={"loaderWorld"}>
    <WorldSkeleton />
  </section>
  <section transition:name={ROUTE_LABEL.Archive} slot={"loaderArchive"}>
    <ArchiveSkeleton />
  </section>
</MantineHeader>
<TransitionFrom />
