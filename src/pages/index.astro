---
import Global from "../../packages/layouts/Global.astro";

import BaseHead from "../../packages/components/BaseHead.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "@/packages/consts";

import profile from "@/packages/assets/profile.jpg";
import { Picture } from "astro:assets";

import { getBadges } from "@/packages/utils/badges";
import MantineMain from "../components/MantineMain";
import Hero from "../components/Hero";
import BlogSectionsWrapper from "../components/BlogSectionsWrapper.astro";
import SpotifyPlayer from "../components/SpotifyPlayer";
import Tags, { TagGroup } from "../components/Tags";
import NewsLetter from "../components/NewsLetter";
import Footer from "@/packages/components/Footer.astro";
import Header from "@/packages/components/Header.astro";
import MantineHeat from "../components/MantineHeat";
import { getCounts, getHeatmapData } from "@/packages/utils/heatmap";

export const prerender = true;
const badges = await getBadges()
const heatData = await getHeatmapData()
const counts = await getCounts()
---

<Global>
  <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} slot="head" />
  <Header/>
  <MantineMain>
    <Hero>
      <Picture src={profile} alt="profile" decoding="async" slot="picture" />
    </Hero>
    <MantineHeat data={heatData} count={counts["2025"]} />
    <BlogSectionsWrapper />
    <Tags client:load>
      <TagGroup tags={badges} slot="tagGroup" />
    </Tags>
    <SpotifyPlayer client:load />
    <NewsLetter />
    <Footer slug={"index"} />
  </MantineMain>
</Global>
