---
import BaseHead from "../../components/BaseHead.astro"
import Header from "../../components/Header.astro"
import Footer from "../../components/Footer.astro"
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts"
import { getCollection } from "astro:content"

import Global from "@/layouts/Global.astro"
import BlogCard from "@/components/BlogCard"
import { title, date } from "@/utils/extract"

const posts = (await getCollection("blog")).reverse()
---

<Global>
  <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} slot="head" />
  <Header />
  <main>
    <section>
      <ul class="grid grid-cols-3 gap-6 p-4">
        {
          posts.map((post) => (
            <li>
            <!--<a href={`/blog/${post.slug}`}>{title(post)}</a>-->
              <BlogCard
				title={title(post)}
				date={date(post)}
			  />
            </li>
          ))
        }
      </ul>
    </section>
    <Footer />
  </main>
</Global>

<!-- <!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<section>
				<ul>
					{
						posts.map((post) => (
							<li>
								<a href={`/blog/${post.slug}`}>	
									{title(post)}
								</a>
							</li>
						))
					}
				</ul>
			</section>
		</main>
		<Footer />
	</body>
</html> -->
