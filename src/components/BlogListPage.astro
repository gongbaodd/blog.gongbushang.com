---
import Global from "../../packages/layouts/Global.astro";
import BaseHead from "../../packages/components/BaseHead.astro";
import {
  SITE_DESCRIPTION,
  SITE_TITLE,
  FILTER_ENTRY,
  ROUTE_LABEL,
} from "../../packages/consts";
import MantineMain from "../../packages/scaffold/MantineMain";
import Footer from "@/packages/components/Footer.astro";
import { BlogListMenu } from "../../packages/menu/BlogListMenu";
import Header from "@/packages/header/Header.astro";
import { GridWithMenu } from "@/packages/scaffold/GridWithMenu";
import BlogPlock from "../../packages/masonry/BlogPlock";

interface Props {
  subTitle: string;
  totalCount: number;
  filter: string;
  entryType?: FILTER_ENTRY;
}

const {
  subTitle,
  filter,
  entryType,
  totalCount,
} = Astro.props;
---

<Global>
  <BaseHead
    title={`${SITE_TITLE} | ${subTitle}`}
    description={SITE_DESCRIPTION}
    slot="head"
  />
  <Header transition:persist />
  <section transition:name={ROUTE_LABEL.Blog} transition:animate="slide">
    <MantineMain client:load>
      <GridWithMenu
        menuCol={{ base: 12, md: 1.2 }}
        contentCol={{ base: 12, md: 10.8 }}
      >
        <BlogListMenu slot="menuNode" client:load />
        <BlogPlock 
          totalCount={totalCount} 
          entryType={entryType}
          filter={filter}
          page={0}
          slot="gridContent" 
          client:load 
        />
      </GridWithMenu>
      <Footer slug={filter} />
    </MantineMain>
  </section>
</Global>
