---
import BlogSections from "./BlogSections";
import dayjs from "dayjs";
import { getAllPostByDateDesc, initYearPostMap, mapServerPostToClient } from "@/packages/utils/filter";

const _posts = await getAllPostByDateDesc();
const latestPosts = await mapServerPostToClient(_posts.slice(0, 5));
const historyPosts =  await mapServerPostToClient(_posts.slice(5, 10));

const buildDateLabel = dayjs().format("YYYY-MM-DD");
const randomYear = Math.floor(Math.random() * 10) + 2015;
const monthPostMap = initYearPostMap(_posts);
---

<BlogSections 
  latestPosts={latestPosts} 
  historyPosts={historyPosts} 
  client:load
/>